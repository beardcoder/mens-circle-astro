---
import BaseLayout from "@layouts/BaseLayout.astro";
import Hero from "@components/Hero.astro";
import Features from "@components/Features.astro";
import Quote from "@components/Quote.astro";
import Events from "@components/Events.astro";
import About from "@components/About.astro";
import Journey from "@components/Journey.astro";
import Faq from "@components/Faq.astro";
import NewsletterSection from "@components/NewsletterSection.astro";
import {
  aboutSection,
  faqItems,
  features,
  heroContent,
  journey,
  newsletterCopy,
  quoteContent,
} from "@data";
import { getUpcomingEvents } from "@lib/api/events";

const upcomingEvents = await getUpcomingEvents();
const nextEvent = upcomingEvents[0] || null;

console.log("Next Event:", nextEvent);
---

<BaseLayout
  description="Männerkreis in Straubing für persönliche Entwicklung. Authentischer Austausch in geschütztem Raum. Männergruppe Niederbayern mit monatlichen Treffen."
  title="Männerkreis Straubing Niederbayern - Persönliche Entwicklung für Männer"
  cta={{
    href: nextEvent ? `/events/${nextEvent.slug}` : "/#next-event",
    label: "Nächstes Treffen →",
  }}
>
  <Hero
    content={heroContent}
    event={nextEvent}
  />
  <Features items={features} />
  <Quote
    author={quoteContent.author}
    text={quoteContent.text}
  />
  <Events events={upcomingEvents || null} />
  <About
    id={aboutSection.id}
    image={aboutSection.image}
    paragraphs={aboutSection.paragraphs}
    subtitle={aboutSection.subtitle}
    title={aboutSection.title}
  />
  <Journey
    description={journey.description}
    id={journey.id}
    image={journey.image}
    steps={journey.steps}
    title={journey.title}
  />
  <Faq items={faqItems} />
  <NewsletterSection
    description={newsletterCopy.description}
    label={newsletterCopy.label}
    privacyHref={newsletterCopy.privacyHref}
    title={newsletterCopy.title}
  />
</BaseLayout>
